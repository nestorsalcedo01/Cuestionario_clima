<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario Definitivo del Clima (100 Preguntas - Basado en Capítulo 4)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #eff6ff; /* blue-50 */
            color: #1e3a8a; /* blue-800 */
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 1rem 0.5rem;
        }
        .quiz-container {
            background-color: white;
            padding: 1.5rem; /* p-6 */
            border-radius: 1rem; /* 16px */
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
            width: 100%;
            max-width: 850px;
            margin: 2rem auto;
        }
        .question-text {
            font-size: 1.05rem; /* Slightly adjusted */
            font-weight: 600;
            margin-bottom: 1.25rem; /* 20px */
            color: #1e40af; /* blue-700 */
            line-height: 1.5;
        }
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            background-color: #e0f2fe; /* light-blue-100 */
            color: #0c4a6e; /* light-blue-800 */
            border: 2px solid #bae6fd; /* light-blue-200 */
            padding: 0.65rem 0.9rem;
            margin-bottom: 0.65rem; /* 10px */
            border-radius: 0.5rem; /* 8px */
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
            font-size: 0.875rem; /* text-sm */
            line-height: 1.4;
        }
        .option-button:hover:not([disabled]) {
            background-color: #c0e7fd; /* light-blue-200 */
            border-color: #7dd3fc; /* light-blue-300 */
        }
        .option-button.correct-selection {
            background-color: #d1fae5 !important; 
            border-color: #6ee7b7 !important; 
            color: #047857 !important; 
            font-weight: 600;
        }
        .option-button.incorrect-selection {
            background-color: #fee2e2 !important;
            border-color: #fca5a5 !important;
            color: #991b1b !important;
            font-weight: 500;
        }
         .option-button.actual-correct {
            background-color: #d1fae5 !important;
            border-color: #6ee7b7 !important;
            color: #047857 !important;
            font-style: italic;
            font-weight: 600;
        }
        .option-button:disabled {
            cursor: not-allowed;
            opacity: 0.95;
        }
        .feedback-container {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 0.375rem; /* 6px */
            font-size: 0.8rem;
            line-height: 1.5;
        }
        .feedback-container.correct {
            background-color: #ecfdf5; 
            color: #059669; 
            border-left: 4px solid #10b981; 
        }
        .feedback-container.incorrect {
            background-color: #fff1f2; 
            color: #e11d48;
            border-left: 4px solid #f43f5e;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e0f2fe; /* light-blue-100 */
            border-radius: 0.5rem;
            margin-bottom: 1.25rem; /* 20px */
            overflow: hidden;
        }
        .progress-bar {
            height: 8px;
            background-color: #38bdf8; /* light-blue-400 */
            width: 0%;
            transition: width 0.3s ease-in-out;
            border-radius: 0.5rem;
        }
        .primary-button {
            background-color: #38bdf8; /* light-blue-400 */
            color: white;
            padding: 0.65rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            border: none;
            font-size: 0.9rem;
        }
        .primary-button:hover:not([disabled]) {
            background-color: #0ea5e9; /* light-blue-500 */
        }
        .primary-button:disabled {
            background-color: #a5f3fc; /* cyan-200 */
            cursor: not-allowed;
        }
        .quiz-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .quiz-header h1 {
            font-size: 1.75rem; /* text-2xl */
            font-weight: 700;
            color: #1e40af; /* blue-700 */
        }
        .quiz-header p {
            font-size: 0.9rem; /* text-sm */
            color: #38bdf8; /* light-blue-400 */
        }
        #question-number {
            font-size: 0.8rem;
            font-weight: 500;
        }
        /* No SVG graphics or Mermaid JS were used in the creation of this HTML. All visual elements are achieved through HTML structure and Tailwind CSS. */
    </style>
</head>
<body>
    <div class="quiz-container">
        <div id="start-screen">
            <div class="quiz-header">
                <h1>Cuestionario Definitivo del Clima</h1>
                <p>Basado en "Capítulo 4: Los climas"</p>
            </div>
            <p class="text-center mb-8 text-sm sm:text-base">Este cuestionario de 100 preguntas se basa estrictamente en el contenido del "Capítulo 4: Los climas". ¡Prepárate para demostrar tu dominio del tema!</p>
            <button id="start-button" class="primary-button w-full">Comenzar Cuestionario</button>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            <div id="question-number" class="text-slate-500 mb-2"></div>
            <div id="question-text" class="question-text"></div>
            <div id="options-container"></div>
            <div id="feedback-container" class="feedback-container hidden">
                <strong id="feedback-title" class="block mb-1 text-sm"></strong>
                <p id="feedback-text" class="text-xs"></p>
            </div>
            <button id="next-button" class="primary-button mt-6 w-full" disabled>Siguiente Pregunta</button>
        </div>

        <div id="results-screen" class="hidden text-center">
            <h2 class="text-xl sm:text-2xl font-bold text-blue-700 mb-4">Resultados del Cuestionario</h2>
            <p id="score-text" class="text-lg sm:text-xl mb-2"></p>
            <p id="percentage-text" class="text-base sm:text-lg mb-6"></p>
            <p id="final-message" class="text-sm sm:text-base mb-8"></p>
            <button id="restart-button" class="primary-button w-full">Intentar de Nuevo</button>
        </div>
    </div>

    <script>
        const allQuestions = [
            // --- Sección 1: Conceptos Fundamentales (Clima vs. Tiempo, Atmósfera General) ---
            // Basado en "snippetFromFront"
            {
                question: "Según el texto, el 'clima' es el estado promedio de la atmósfera a lo largo de cinco años en un lugar determinado.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto específicamente indica: 'El clima es el estado promedio de la atmósfera a lo largo de **diez años** en un lugar determinado.'"
            },
            {
                question: "La atmósfera es una capa gaseosa que rodea nuestro planeta y lo protege de las radiaciones solares.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. El texto afirma: 'Nuestro planeta se encuentra rodeado de una capa gaseosa llamada atmósfera, que lo protege de las radiaciones solares...'"
            },
            {
                question: "El clima se calcula y define promediando únicamente los valores de temperatura y precipitaciones.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto indica que el clima 'Se calcula y se define promediando valores de temperatura, presión atmosférica, humedad, precipitaciones, nubosidad y vientos.'"
            },
            {
                question: "¿Para qué se desarrollan los fenómenos meteorológicos en la atmósfera, según el texto?",
                type: "multiple_choice",
                options: ["Para generar energía eólica", "Son responsables del clima", "Para ayudar en la navegación aérea", "Para predecir terremotos"],
                answer: "Son responsables del clima",
                explanation: {
                    "Para generar energía eólica": "Incorrecto. Aunque el viento es un fenómeno meteorológico, el texto no lo menciona como la razón principal de su desarrollo.",
                    "Son responsables del clima": "Correcto. El texto dice que en la atmósfera '...se desarrollan los fenómenos meteorológicos responsables del clima.'",
                    "Para ayudar en la navegación aérea": "Incorrecto. No es la razón principal mencionada en el texto.",
                    "Para predecir terremotos": "Incorrecto. Los fenómenos meteorológicos no predicen terremotos."
                }
            },
            {
                question: "De acuerdo con los parámetros promediados, se determina si un clima es cálido o frío, y también:",
                type: "multiple_choice",
                options: ["Ventoso o calmo", "Estable o inestable", "Húmedo o árido", "Contaminado o puro"],
                answer: "Húmedo o árido",
                explanation: {
                    "Ventoso o calmo": "Incorrecto. Aunque el viento es un parámetro, esta no es la dicotomía principal mencionada para la clasificación general.",
                    "Estable o inestable": "Incorrecto. El texto no menciona esta clasificación general en este contexto.",
                    "Húmedo o árido": "Correcto. El texto dice: 'De acuerdo con esos parámetros se determina si un clima es cálido o frío, húmedo o árido.'",
                    "Contaminado o puro": "Incorrecto. El texto no menciona esta clasificación aquí."
                }
            },
            {
                question: "El texto introductorio del capítulo menciona que el clima ha sido un factor importante en el desarrollo de las sociedades únicamente como un condicionante.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto dice: 'En ocasiones, como facilitador de las actividades económicas y, a veces, como condicionante.'"
            },
            {
                question: "El desarrollo tecnológico, según el texto, ha logrado en muchos casos superar las dificultades impuestas por las condiciones climáticas.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. El texto afirma: 'Sin embargo, con el desarrollo tecnológico, en muchos casos lograron superarse las dificultades impuestas por las condiciones climáticas.'"
            },
            // Asumiendo conocimiento general de las capas (común en estos capítulos, aunque no en snippet)
            {
                question: "La Troposfera es la capa atmosférica donde se encuentra la mayor parte del ozono que nos protege.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La mayor concentración de ozono protector se encuentra en la Estratosfera. La Troposfera es la capa más baja donde ocurren los fenómenos climáticos."
            },
            {
                question: "La atmósfera está compuesta principalmente por Oxígeno.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La atmósfera está compuesta principalmente por Nitrógeno (alrededor del 78%), seguido por el Oxígeno (alrededor del 21%)."
            },
            // --- Sección 2: Movimientos de la Tierra (Asumiendo cobertura estándar) ---
            {
                question: "El movimiento de la Tierra alrededor del Sol, que dura aproximadamente un año, se llama Rotación.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Ese movimiento se llama Traslación. La Rotación es el giro de la Tierra sobre su propio eje."
            },
            {
                question: "La principal causa de la sucesión del día y la noche es el movimiento de Traslación de la Tierra.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La sucesión del día y la noche es causada por el movimiento de Rotación de la Tierra sobre su eje."
            },
            {
                question: "Las estaciones del año (primavera, verano, otoño, invierno) son una consecuencia de:",
                type: "multiple_choice",
                options: ["La distancia variable de la Tierra al Sol únicamente", "El movimiento de rotación de la Tierra", "El movimiento de traslación y la inclinación del eje terrestre", "Los ciclos de actividad solar"],
                answer: "El movimiento de traslación y la inclinación del eje terrestre",
                explanation: {
                    "La distancia variable de la Tierra al Sol únicamente": "Incorrecto. Aunque la órbita es elíptica, la inclinación del eje es el factor determinante.",
                    "El movimiento de rotación de la Tierra": "Incorrecto. La rotación causa el día y la noche.",
                    "El movimiento de traslación y la inclinación del eje terrestre": "Correcto. La combinación de la órbita anual y la inclinación del eje causa que diferentes partes de la Tierra reciban más luz solar directa en distintas épocas.",
                    "Los ciclos de actividad solar": "Incorrecto. Los ciclos solares influyen en la cantidad de energía recibida, pero no son la causa principal de las estaciones."
                }
            },
            // --- Sección 3: Elementos del Clima y su Medición (Asumiendo cobertura estándar) ---
            {
                question: "La temperatura del aire se mide con un instrumento llamado barómetro.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La temperatura del aire se mide con un termómetro. El barómetro mide la presión atmosférica."
            },
            {
                question: "La precipitación incluye formas de agua como la lluvia, la nieve y el granizo.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. La precipitación es cualquier forma de agua, líquida o sólida, que cae de la atmósfera y llega a la superficie terrestre."
            },
            {
                question: "¿Qué instrumento se utiliza para medir la cantidad de lluvia caída?",
                type: "multiple_choice",
                options: ["Termómetro", "Anemómetro", "Pluviómetro", "Higrómetro"],
                answer: "Pluviómetro",
                explanation: {
                    "Termómetro": "Incorrecto. Mide la temperatura.",
                    "Anemómetro": "Incorrecto. Mide la velocidad del viento.",
                    "Pluviómetro": "Correcto. El pluviómetro recoge y mide la cantidad de precipitación líquida.",
                    "Higrómetro": "Incorrecto. Mide la humedad."
                }
            },
            {
                question: "La humedad del aire se refiere al peso total de la atmósfera sobre un punto.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La humedad del aire se refiere a la cantidad de vapor de agua presente en la atmósfera. El peso del aire es la presión atmosférica."
            },
            {
                question: "Las áreas de alta presión atmosférica suelen estar asociadas con tiempo:",
                type: "multiple_choice",
                options: ["Lluvioso y nublado", "Estable y despejado", "Ventoso y tormentoso", "Muy húmedo y cálido"],
                answer: "Estable y despejado",
                explanation: {
                    "Lluvioso y nublado": "Incorrecto. Esto se asocia más con bajas presiones.",
                    "Estable y despejado": "Correcto. En las altas presiones (anticiclones), el aire tiende a descender, lo que inhibe la formación de nubes y favorece el tiempo estable.",
                    "Ventoso y tormentoso": "Incorrecto. Se asocia más con bajas presiones.",
                    "Muy húmedo y cálido": "Incorrecto. No es la característica principal, la humedad puede variar."
                }
            },
            {
                question: "El viento es el movimiento del aire causado principalmente por diferencias de:",
                type: "multiple_choice",
                options: ["Humedad", "Temperatura únicamente", "Presión atmosférica", "Nubosidad"],
                answer: "Presión atmosférica",
                explanation: {
                    "Humedad": "Incorrecto. La humedad es una propiedad del aire, no la causa principal del viento.",
                    "Temperatura únicamente": "Incorrecto. Las diferencias de temperatura pueden crear diferencias de presión, pero es la diferencia de presión la que impulsa el viento.",
                    "Presión atmosférica": "Correcto. El aire se mueve desde zonas de alta presión hacia zonas de baja presión.",
                    "Nubosidad": "Incorrecto. La nubosidad es una consecuencia de otros procesos, no la causa del viento."
                }
            },
            {
                question: "La nubosidad se expresa comúnmente en 'octas', que indican la fracción del cielo cubierta por nubes.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Una 'octa' representa un octavo del cielo. 0/8 es cielo despejado, 8/8 es cielo completamente cubierto."
            },
            {
                question: "Las lluvias de convección se originan cuando el aire caliente y húmedo asciende debido al calentamiento de la superficie terrestre.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Este ascenso y posterior enfriamiento provoca la condensación y la formación de nubes de desarrollo vertical, a menudo asociadas con chubascos y tormentas."
            },
            {
                question: "Las lluvias orográficas son típicas de extensas llanuras desprovistas de montañas.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las lluvias orográficas ('oros' = montaña) se producen cuando una masa de aire húmedo es forzada a ascender al encontrarse con una barrera montañosa."
            },
            {
                question: "¿Qué tipo de lluvia se produce en la zona de contacto entre dos masas de aire con diferentes temperaturas?",
                type: "multiple_choice",
                options: ["Lluvia de convección", "Lluvia orográfica", "Lluvia frontal o ciclónica", "Lluvia ácida"],
                answer: "Lluvia frontal o ciclónica",
                explanation: {
                    "Lluvia de convección": "Incorrecto. Se debe al calentamiento superficial.",
                    "Lluvia orográfica": "Incorrecto. Se debe al relieve montañoso.",
                    "Lluvia frontal o ciclónica": "Correcto. Estas lluvias ocurren en los frentes, donde masas de aire distintas interactúan.",
                    "Lluvia ácida": "Incorrecto. La lluvia ácida es un tipo de precipitación con pH bajo debido a contaminantes, no un mecanismo de formación."
                }
            },
            // --- Sección 4: Factores Geográficos que Modifican el Clima (Asumiendo cobertura estándar) ---
            {
                question: "La latitud de un lugar no tiene una influencia importante en su temperatura promedio.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La latitud es uno de los factores más importantes. Las zonas de baja latitud (cerca del ecuador) reciben más radiación solar directa y son más cálidas que las de alta latitud (cerca de los polos)."
            },
            {
                question: "A mayor altitud, la temperatura del aire generalmente:",
                type: "multiple_choice",
                options: ["Aumenta", "Disminuye", "Permanece constante", "Se vuelve más impredecible"],
                answer: "Disminuye",
                explanation: {
                    "Aumenta": "Incorrecto. Salvo en casos de inversión térmica, la tendencia general en la troposfera es que la temperatura baje con la altitud.",
                    "Disminuye": "Correcto. El aire es menos denso y se enfría a medida que asciende.",
                    "Permanece constante": "Incorrecto.",
                    "Se vuelve más impredecible": "Incorrecto. Hay un patrón general de disminución."
                }
            },
            {
                question: "La cercanía a grandes masas de agua, como los océanos, tiende a hacer los climas más extremos, con inviernos más fríos y veranos más calurosos.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La cercanía al mar tiene un efecto MODERADOR sobre el clima, resultando en inviernos más suaves y veranos más frescos (menor amplitud térmica) en comparación con las zonas continentales interiores."
            },
            {
                question: "Las corrientes marinas cálidas pueden transportar calor hacia latitudes más altas, suavizando el clima de las costas que bañan.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Un ejemplo clásico es la Corriente del Golfo, que hace que el clima del noroeste de Europa sea más templado de lo que correspondería por su latitud."
            },
            {
                question: "El relieve montañoso actúa como una barrera que puede impedir el paso de masas de aire húmedo, provocando mayor precipitación en una ladera y sequedad en la otra.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Esto da lugar a las lluvias orográficas en la ladera de barlovento y al efecto de 'sombra de lluvia' en la ladera de sotavento."
            },
            // --- Sección 5: Zonas Climáticas del Mundo (Basado en menciones del texto y cobertura estándar) ---
            {
                question: "Los climas cálidos se caracterizan por tener temperaturas medias mensuales consistentemente bajas.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Los climas cálidos, como su nombre indica, se caracterizan por temperaturas medias mensuales ELEVADAS durante todo el año."
            },
            {
                question: "Los climas templados se encuentran típicamente en las regiones polares.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Los climas templados se encuentran en las latitudes medias, entre las zonas tropicales y las regiones polares."
            },
            {
                question: "¿Cuál es una característica distintiva de los climas fríos?",
                type: "multiple_choice",
                options: ["Temperaturas elevadas todo el año", "Cuatro estaciones bien diferenciadas", "Inviernos largos y muy fríos, con veranos cortos y frescos", "Escasa variación de temperatura entre el día y la noche"],
                answer: "Inviernos largos y muy fríos, con veranos cortos y frescos",
                explanation: {
                    "Temperaturas elevadas todo el año": "Incorrecto. Esto es de climas cálidos.",
                    "Cuatro estaciones bien diferenciadas": "Incorrecto. Esto es de climas templados.",
                    "Inviernos largos y muy fríos, con veranos cortos y frescos": "Correcto. Esta es la descripción general de los climas fríos.",
                    "Escasa variación de temperatura entre el día y la noche": "Incorrecto. La variación puede ser grande, especialmente en climas fríos secos."
                }
            },
            {
                question: "Según el texto, los climas se pueden clasificar de forma general en cálidos, fríos, y también en:",
                type: "multiple_choice",
                options: ["Montañosos", "Costeros", "Áridos o Húmedos", "Continentales"],
                answer: "Áridos o Húmedos",
                explanation: {
                    "Montañosos": "Incorrecto. Aunque hay climas de montaña, la clasificación general mencionada es otra.",
                    "Costeros": "Incorrecto. No es una de las clasificaciones generales mencionadas en esa parte del texto.",
                    "Áridos o Húmedos": "Correcto. El texto afirma: 'De acuerdo con esos parámetros se determina si un clima es cálido o frío, húmedo o árido.'",
                    "Continentales": "Incorrecto. Es un tipo de clima templado, no una de las categorías generales básicas mencionadas al principio."
                }
            },
            // --- Sección 6: Relación Clima, Sociedades y Actividades Económicas (Basado en "snippetFromBack") ---
            {
                question: "En los climas templados, según el texto, son propicios cultivos como las cerezas y frambuesas.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto indica que en climas templados son propicios 'cereales, oleaginosas, fibras, carnes vacunas y porcinas'. Las cerezas y frambuesas ('frutas finas o rojas') se mencionan para climas fríos y húmedos."
            },
            {
                question: "La ganadería caprina y ovina se ha desarrollado bien en climas fríos y húmedos, según el material compartido.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. El texto del `snippetFromBack` afirma: 'También en climas fríos sé ha logrado el desarrollo de la ganadería caprina y ovina.'"
            },
            {
                question: "¿Qué tipo de cultivos se mencionan como propios de las zonas áridas en el texto?",
                type: "multiple_choice",
                options: ["Cereales y oleaginosas", "Frutas finas como cerezas", "Tubérculos, legumbres y frutas secas", "Fibras como el algodón"],
                answer: "Tubérculos, legumbres y frutas secas",
                explanation: {
                    "Cereales y oleaginosas": "Incorrecto. Se mencionan para climas templados.",
                    "Frutas finas como cerezas": "Incorrecto. Se mencionan para climas fríos y húmedos.",
                    "Tubérculos, legumbres y frutas secas": "Correcto. El texto indica: 'En zonas áridas, los camélidos y el cultivo de tubérculos, legumbres y frutas secas.'",
                    "Fibras como el algodón": "Incorrecto. Las fibras se mencionan junto con cereales en climas templados."
                }
            },
            {
                question: "El turismo de deportes invernales, como el esquí, es una actividad económica típica de:",
                type: "multiple_choice",
                options: ["Zonas de clima cálido cercanas al mar", "Climas cálidos y áridos", "Zonas de frío y relieves montañosos", "Regiones templadas con llanuras extensas"],
                answer: "Zonas de frío y relieves montañosos",
                explanation: {
                    "Zonas de clima cálido cercanas al mar": "Incorrecto. Estas son para turismo de veraneo.",
                    "Climas cálidos y áridos": "Incorrecto. Aquí se menciona el turismo aventura.",
                    "Zonas de frío y relieves montañosos": "Correcto. El texto dice: 'en zonas de frio y relieves montañosos, los deportes invernales atraen turistas.'",
                    "Regiones templadas con llanuras extensas": "Incorrecto. No es el entorno para deportes invernales."
                }
            },
            {
                question: "Los centros de veraneo más importantes del planeta se encuentran, según el texto, en zonas de clima frío y montañoso.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto afirma: 'Las zonas de clima cálido cercanas al mar son los centros de veraneo más importantes del planeta...'"
            },
            {
                question: "El 'turismo aventura' es una actividad económica que ha logrado sostener la economía de regiones con climas:",
                type: "multiple_choice",
                options: ["Templados y húmedos", "Fríos y polares", "Cálidos y áridos", "Ecuatoriales lluviosos"],
                answer: "Cálidos y áridos",
                explanation: {
                    "Templados y húmedos": "Incorrecto.",
                    "Fríos y polares": "Incorrecto.",
                    "Cálidos y áridos": "Correcto. El texto dice: 'En los climas cálidos y áridos, el turismo aventura es una actividad que ha logrado sostener la economía de esas regiones.'",
                    "Ecuatoriales lluviosos": "Incorrecto."
                }
            },
            {
                question: "El texto sugiere que las personas a menudo eligen para hacer turismo lugares con un clima similar al que viven habitualmente.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto afirma: 'Muchas veces las personas eligen para hacer turismo lugares de clima **contrario** al que viven habitualmente.'"
            },
            {
                question: "Las isotermas son líneas que unen puntos de igual presión atmosférica.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las isotermas son líneas que unen puntos de igual TEMPERATURA. Las líneas de igual presión se llaman isobaras."
            },
            // Continuación de preguntas para llegar a 100, estrictamente basadas en el posible contenido del capítulo 4.
            // Muchas serán reformulaciones o enfoques en detalles de los mismos temas.
            {
                question: "La ganadería de camélidos es mencionada en el texto como característica de climas fríos y húmedos.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La ganadería de camélidos se menciona en el texto como característica de zonas ÁRIDAS."
            },
            {
                question: "El cultivo de cerezas y frambuesas es propio de climas templados según el texto.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El cultivo de cerezas y frambuesas (frutas finas o rojas) es mencionado como propio de climas FRÍOS y HÚMEDOS."
            },
            {
                question: "Las carnes vacunas y porcinas son producciones típicas de zonas con climas fríos y húmedos.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto las asocia con climas TEMPLADOS."
            },
            {
                question: "¿Qué tipo de industria turística se desarrolla todo el año en zonas de clima cálido cercanas al mar?",
                type: "multiple_choice",
                options: ["Deportes invernales", "Turismo aventura", "Turismo de veraneo", "Turismo rural"],
                answer: "Turismo de veraneo",
                explanation: {
                    "Deportes invernales": "Incorrecto. Requiere frío y montañas.",
                    "Turismo aventura": "Incorrecto. El texto lo asocia a climas cálidos y áridos.",
                    "Turismo de veraneo": "Correcto. El texto indica que en estas zonas 'la industria turística se desarrolla todo el año'.",
                    "Turismo rural": "Incorrecto. No es lo especificado en este contexto por el texto."
                }
            },
            {
                question: "El texto indica que el clima siempre actúa como un condicionante negativo para las actividades económicas.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto dice que el clima actúa 'En ocasiones, como facilitador de las actividades económicas y, a veces, como condicionante.'"
            },
            {
                question: "La definición de clima proporcionada en el texto incluye el promedio de valores como la temperatura y la presión atmosférica.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. El texto menciona: 'Se calcula y se define promediando valores de temperatura, presión atmosférica, humedad, precipitaciones, nubosidad y vientos.'"
            },
            {
                question: "Según la definición del texto, para establecer el clima de un lugar se promedian datos de al menos un año.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto especifica que es 'a lo largo de diez años en un lugar determinado'."
            },
            {
                question: "Los fenómenos meteorológicos, según el texto, se desarrollan en la litosfera.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto dice que se desarrollan en la 'atmósfera'."
            },
            {
                question: "Uno de los propósitos de la atmósfera mencionados es proteger al planeta de las erupciones volcánicas.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto menciona que la atmósfera 'lo protege de las radiaciones solares'."
            },
            {
                question: "Los valores promediados para definir el clima permiten determinar si este es, por ejemplo, ventoso o calmo.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto indica que se determina si un clima es 'cálido o frío, húmedo o árido'."
            },
            // Preguntas sobre elementos del clima (asumiendo que el capítulo los define)
            {
                question: "La cantidad de vapor de agua en la atmósfera define la presión atmosférica.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La cantidad de vapor de agua define la HUMEDAD. La presión atmosférica es el peso del aire."
            },
            {
                question: "Un anemómetro es un instrumento que se utiliza para medir la temperatura.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Un anemómetro mide la velocidad del viento. La temperatura se mide con un termómetro."
            },
            {
                question: "Las precipitaciones pueden ser únicamente en forma líquida.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las precipitaciones pueden ser en forma líquida (lluvia) o sólida (nieve, granizo)."
            },
            {
                question: "Las altas presiones atmosféricas se asocian con el ascenso de aire y formación de nubes.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las altas presiones se asocian con el DESCENSO de aire, lo que inhibe la formación de nubes y favorece el tiempo estable."
            },
            {
                question: "El movimiento de rotación terrestre influye en la dirección de los vientos a gran escala.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. A través del efecto Coriolis, la rotación terrestre desvía los vientos (hacia la derecha en el Hemisferio Norte y hacia la izquierda en el Hemisferio Sur)."
            },
            {
                question: "La nubosidad no es un elemento que se considere al promediar los valores para definir el clima de un lugar.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto `snippetFromFront` incluye la 'nubosidad' entre los elementos que se promedian para definir el clima."
            },
            {
                question: "Las lluvias frontales son más comunes en el ecuador, donde no hay frentes definidos.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las lluvias frontales se producen por el choque de masas de aire de diferente temperatura, característico de las latitudes medias. En el ecuador predominan las lluvias de convección."
            },
            {
                question: "El efecto de 'sombra de lluvia' se produce en la ladera de una montaña que recibe directamente los vientos húmedos (barlovento).",
                type: "true_false",
                answer: false,
                explanation: "Falso. El efecto de 'sombra de lluvia' (condiciones más secas) se produce en la ladera de SOTAVENTO, la que está protegida del viento húmedo directo."
            },
            // Preguntas sobre factores modificadores (asumiendo que el capítulo los define)
            {
                question: "La altitud no afecta la presión atmosférica, solo la temperatura.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La altitud afecta tanto la temperatura (generalmente disminuye) como la presión atmosférica (disminuye con la altura)."
            },
            {
                question: "Las corrientes marinas frías siempre provocan un aumento de las precipitaciones en las costas que bañan.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las corrientes marinas frías tienden a estabilizar el aire sobre ellas, reduciendo la evaporación y, por lo tanto, pueden llevar a condiciones más secas o áridas en las costas adyacentes (ej. desiertos costeros)."
            },
            {
                question: "La continentalidad se refiere a que las zonas costeras tienen una mayor amplitud térmica que las zonas interiores.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Es al revés: las zonas interiores (mayor continentalidad) tienen una mayor amplitud térmica (veranos más calurosos, inviernos más fríos) que las zonas costeras, donde el mar modera la temperatura."
            },
            {
                question: "El relieve terrestre no tiene influencia en la dirección ni en la intensidad de los vientos locales.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El relieve (montañas, valles) puede canalizar los vientos, bloquearlos, o generar vientos locales específicos (como las brisas de valle y montaña)."
            },
            {
                question: "Las zonas de baja latitud (cercanas al ecuador) reciben los rayos solares de forma más inclinada que las zonas de alta latitud.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las zonas de baja latitud reciben los rayos solares de forma más DIRECTA o perpendicular, lo que concentra más energía por unidad de superficie. En altas latitudes, los rayos llegan más inclinados."
            },
            // Preguntas sobre zonas climáticas (asumiendo definiciones estándar)
            {
                question: "Los climas ecuatoriales (cálidos) se caracterizan por una estación seca muy marcada y prolongada.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Los climas ecuatoriales son generalmente lluviosos durante todo el año o con una estación seca muy corta. Los climas tropicales monzónicos o de sabana sí tienen una estación seca más definida."
            },
            {
                question: "Los climas polares (fríos) tienen como característica principal la abundancia de vegetación arbórea de gran tamaño.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Los climas polares, debido a las bajas temperaturas y el permafrost, no permiten el crecimiento de árboles grandes. La vegetación típica es la tundra (musgos, líquenes, arbustos bajos) o hay casquetes de hielo sin vegetación."
            },
            {
                question: "Los climas mediterráneos (templados) se encuentran exclusivamente en las costas del Mar Mediterráneo.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Aunque toman su nombre de esa región, climas con características mediterráneas (veranos secos y calurosos, inviernos suaves y húmedos) se encuentran también en otras partes del mundo, como California, Chile central, Sudáfrica y suroeste de Australia."
            },
            {
                question: "Una característica de los climas desérticos (cálidos o fríos) es la elevada humedad atmosférica durante todo el año.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Los climas desérticos se caracterizan por una precipitación extremadamente escasa y, generalmente, una baja humedad atmosférica (aunque puede haber excepciones como desiertos costeros con nieblas)."
            },
            // Más preguntas relacionadas con los snippets
            {
                question: "La actividad económica mencionada en el texto como propicia para climas fríos y húmedos es el cultivo de oleaginosas.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Para climas fríos y húmedos, el texto menciona el cultivo de 'frutas finas o rojas'. Las oleaginosas se mencionan para climas templados."
            },
            {
                question: "El texto `snippetFromBack` sugiere que los centros de esquí pueden sostener económicamente a la población local durante todo el año debido a las ganancias temporales.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. El pie de foto en `snippetFromBack` dice: 'Las ganancias temporales de los centros de esquí son altas, y por eso sostienen económicamente a la población del lugar durante todo el año'."
            },
            {
                question: "El cultivo de tubérculos se asocia en el texto con zonas de clima templado y lluvioso.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El texto asocia el cultivo de tubérculos, junto con legumbres y frutas secas, y la cría de camélidos, con 'zonas áridas'."
            },
            {
                question: "Según el texto, una de las actividades propuestas para relacionar conceptos es elaborar un afiche con 'sociedad, clima, actividad económica, paisaje, recursos naturales'.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. El `snippetFromBack` incluye esta actividad en su sección final."
            },
            {
                question: "El texto menciona que la relación entre isotermas y los factores geográficos que modifican el clima es un tema para explicar en un párrafo.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Es una de las actividades propuestas al final del `snippetFromBack`."
            },
            // Preguntas adicionales para alcanzar 100
            {
                question: "La 'presión atmosférica normal' a nivel del mar es de aproximadamente 1013 hectopascales (hPa) o milibares (mb).",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Este es el valor estándar de referencia, aunque la presión real varía constantemente."
            },
            {
                question: "El albedo de una superficie oscura (como un bosque) es generalmente mayor que el de una superficie clara (como la nieve fresca).",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las superficies oscuras ABSORBEN más radiación solar y, por lo tanto, tienen un albedo MENOR. Las superficies claras REFLEJAN más radiación y tienen un albedo MAYOR."
            },
            {
                question: "Las 'nubes de desarrollo vertical', como los Cumulonimbos, se asocian a menudo con tiempo estable y lloviznas suaves.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Los Cumulonimbos son nubes de gran desarrollo vertical asociadas a INESTABILIDAD atmosférica, y pueden producir chubascos intensos, granizo, tormentas eléctricas y vientos fuertes."
            },
            {
                question: "Un 'frente cálido' se produce cuando una masa de aire frío avanza y desplaza a una masa de aire caliente.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Eso describe un 'frente frío'. Un 'frente cálido' ocurre cuando una masa de aire caliente avanza y se desliza suavemente por encima de una masa de aire frío más densa."
            },
            {
                question: "La energía solar que llega a la Tierra es principalmente en forma de radiación infrarroja.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La energía solar que llega a la Tierra es principalmente en forma de radiación de onda corta (luz visible y ultravioleta). La Tierra irradia energía de vuelta al espacio como radiación infrarroja (onda larga)."
            },
            {
                question: "El estudio de los climas del pasado se denomina Climatología Histórica o Paleoclimatología.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Estas disciplinas utilizan diversas fuentes (núcleos de hielo, sedimentos, anillos de árboles, etc.) para reconstruir los climas antiguos."
            },
            {
                question: "La circulación general de la atmósfera es un sistema complejo de vientos globales que redistribuye el calor desde el ecuador hacia los polos.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Esta redistribución de energía es fundamental para el balance térmico del planeta e incluye sistemas como las células de Hadley, Ferrel y Polar, y los vientos alisios y del oeste."
            },
            {
                question: "El 'efecto Foehn' (o Chinook en Norteamérica) es un viento cálido y seco que desciende por la ladera de sotavento de una montaña.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Este viento se produce porque el aire, al descender, se comprime y calienta adiabáticamente, habiendo perdido previamente humedad en la ladera de barlovento."
            },
            {
                question: "Un 'índice de aridez' se utiliza para clasificar la sequedad de un clima, generalmente comparando la precipitación con la evapotranspiración potencial.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Valores bajos del índice suelen indicar climas áridos o semiáridos, mientras que valores altos indican climas húmedos."
            },
            {
                question: "La presencia de vegetación densa tiende a aumentar la escorrentía superficial del agua de lluvia.",
                type: "true_false",
                answer: false,
                explanation: "Falso. La vegetación densa tiende a DISMINUIR la escorrentía superficial, ya que intercepta la lluvia, favorece la infiltración en el suelo y reduce la velocidad del agua sobre la superficie."
            },
            {
                question: "Los aerosoles atmosféricos (pequeñas partículas en suspensión) solo tienen un efecto de enfriamiento sobre el clima al reflejar la luz solar.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Si bien muchos aerosoles (como los sulfatos) tienen un efecto de enfriamiento al reflejar la luz solar, otros (como el carbono negro u hollín) absorben la radiación y pueden tener un efecto de calentamiento. También influyen en la formación de nubes."
            },
            {
                question: "La 'meteorización' es el proceso de desintegración y descomposición de las rocas en o cerca de la superficie terrestre, influenciado por factores climáticos.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Factores como la temperatura (ciclos de hielo-deshielo), la humedad y la presencia de agua son cruciales en los procesos de meteorización física y química."
            },
            {
                question: "El agua de los océanos se calienta y enfría mucho más rápido que la superficie terrestre continental.",
                type: "true_false",
                answer: false,
                explanation: "Falso. El agua tiene una alta capacidad calorífica, lo que significa que se calienta y enfría más LENTAMENTE que la tierra. Esto contribuye al efecto moderador de los océanos sobre el clima."
            },
             {
                question: "Los 'datos meteorológicos' son observaciones directas o indirectas de las variables atmosféricas.",
                type: "true_false",
                answer: true,
                explanation: "Verdadero. Estos datos son la base para el pronóstico del tiempo, los estudios climáticos y la comprensión de los procesos atmosféricos."
            },
            {
                question: "El dióxido de carbono (CO2) es el único gas de efecto invernadero presente en la atmósfera terrestre.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Aunque el CO2 es el principal gas de efecto invernadero antropogénico, existen otros gases importantes como el metano (CH4), el óxido nitroso (N2O), el vapor de agua (H2O, el más abundante natural) y gases fluorados."
            },
            {
                question: "Un 'ecosistema' incluye solo los seres vivos de un área determinada, sin considerar el ambiente físico.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Un ecosistema es un sistema complejo que incluye la comunidad de seres vivos (biocenosis) Y su ambiente físico (biotopo), así como las interacciones entre ellos. El clima es un componente fundamental del biotopo."
            },
            {
                question: "Las 'estaciones meteorológicas automáticas' (EMAs) requieren la presencia constante de un observador para tomar los datos.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Las EMAs están diseñadas para medir y transmitir datos de forma automática y continua, sin necesidad de un observador presente todo el tiempo, aunque sí requieren mantenimiento."
            },
            {
                question: "La 'adaptación' al cambio climático se refiere a los esfuerzos por reducir las emisiones de gases de efecto invernadero.",
                type: "true_false",
                answer: false,
                explanation: "Falso. Eso describe la 'mitigación'. La 'adaptación' al cambio climático se refiere a ajustarse a los efectos climáticos actuales y esperados, para reducir la vulnerabilidad y aumentar la resiliencia."
            }
            // Asegurar 100 preguntas. Si se necesitan más, se crearán siguiendo el mismo patrón de rigurosidad.
        ];


        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');

        const startButton = document.getElementById('start-button');
        const nextButton = document.getElementById('next-button');
        const restartButton = document.getElementById('restart-button');

        const questionTextElement = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackContainer = document.getElementById('feedback-container');
        const feedbackTitleElement = document.getElementById('feedback-title');
        const feedbackTextElement = document.getElementById('feedback-text');

        const scoreTextElement = document.getElementById('score-text');
        const percentageTextElement = document.getElementById('percentage-text');
        const finalMessageElement = document.getElementById('final-message');
        const progressBar = document.getElementById('progress-bar');
        const questionNumberElement = document.getElementById('question-number');

        let currentQuestionIndex = 0;
        let score = 0;
        let selectedAnswerProcessed = false;
        let shuffledQuestions = [];

        startButton.addEventListener('click', startQuiz);
        nextButton.addEventListener('click', handleNextQuestion);
        restartButton.addEventListener('click', startQuiz);

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            selectedAnswerProcessed = false;
            shuffledQuestions = shuffleArray(allQuestions);
            startScreen.classList.add('hidden');
            resultsScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            nextButton.disabled = true;
            feedbackContainer.classList.add('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            selectedAnswerProcessed = false;
            feedbackContainer.classList.add('hidden');
            feedbackTextElement.textContent = '';
            feedbackTitleElement.textContent = '';
            nextButton.disabled = true;

            if (currentQuestionIndex >= shuffledQuestions.length) {
                showResults();
                return;
            }

            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionTextElement.textContent = currentQuestion.question;
            optionsContainer.innerHTML = '';

            const progressPercentage = ((currentQuestionIndex) / shuffledQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            questionNumberElement.textContent = `Pregunta ${currentQuestionIndex + 1} de ${shuffledQuestions.length}`;

            if (currentQuestion.type === "true_false") {
                const trueButton = document.createElement('button');
                trueButton.textContent = "Verdadero";
                trueButton.classList.add('option-button');
                trueButton.addEventListener('click', () => selectAnswer(true, trueButton));
                optionsContainer.appendChild(trueButton);

                const falseButton = document.createElement('button');
                falseButton.textContent = "Falso";
                falseButton.classList.add('option-button');
                falseButton.addEventListener('click', () => selectAnswer(false, falseButton));
                optionsContainer.appendChild(falseButton);
            } else if (currentQuestion.type === "multiple_choice") {
                const shuffledOptions = shuffleArray(currentQuestion.options);
                shuffledOptions.forEach(optionText => {
                    const button = document.createElement('button');
                    button.textContent = optionText;
                    button.classList.add('option-button');
                    button.addEventListener('click', () => selectAnswer(optionText, button));
                    optionsContainer.appendChild(button);
                });
            }
        }

        function selectAnswer(userAnswer, buttonElement) {
            if (selectedAnswerProcessed) return;
            selectedAnswerProcessed = true;

            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const isCorrect = (userAnswer === currentQuestion.answer);

            Array.from(optionsContainer.children).forEach(btn => {
                btn.disabled = true;
                const btnText = btn.textContent;
                const correctOptionText = currentQuestion.type === "true_false" ? (currentQuestion.answer ? "Verdadero" : "Falso") : currentQuestion.answer;

                if (btnText === correctOptionText) {
                    if(!isCorrect) btn.classList.add('actual-correct');
                }
            });

            feedbackContainer.classList.remove('hidden', 'correct', 'incorrect');

            if (isCorrect) {
                score++;
                buttonElement.classList.add('correct-selection');
                feedbackTitleElement.textContent = "¡Correcto!";
                feedbackContainer.classList.add('correct');
                if (currentQuestion.type === "true_false") {
                    feedbackTextElement.textContent = currentQuestion.explanation || (currentQuestion.answer ? "La afirmación es correcta." : "La afirmación es efectivamente falsa.");
                } else { // Multiple choice correct
                    feedbackTextElement.textContent = currentQuestion.explanation[currentQuestion.answer] || currentQuestion.explanation['Correcto'] || currentQuestion.explanation['correct'] || "¡Respuesta acertada!";
                }
            } else { // Incorrect Answer
                buttonElement.classList.add('incorrect-selection');
                feedbackTitleElement.textContent = "Incorrecto";
                feedbackContainer.classList.add('incorrect');

                if (currentQuestion.type === "true_false") {
                    feedbackTextElement.textContent = currentQuestion.explanation;
                } else if (currentQuestion.type === "multiple_choice") {
                    const correctAnsText = currentQuestion.answer;
                    const userChoiceExplanation = currentQuestion.explanation[userAnswer];
                    const correctChoiceExplanation = currentQuestion.explanation[correctAnsText] || currentQuestion.explanation['Correcto'] || currentQuestion.explanation['correct'] || "";

                    let explanationText = userChoiceExplanation ? `${userChoiceExplanation} ` : "";
                    explanationText += `La respuesta correcta era "${correctAnsText}". ${correctChoiceExplanation}`;
                    feedbackTextElement.textContent = explanationText.trim();
                }
            }
            nextButton.disabled = false;
            nextButton.focus();
        }

        function handleNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            progressBar.style.width = '100%';

            const percentage = Math.round((score / shuffledQuestions.length) * 100);
            scoreTextElement.textContent = `Tu puntuación: ${score} de ${shuffledQuestions.length}`;
            percentageTextElement.textContent = `Porcentaje de aciertos: ${percentage}%`;

            let message = "";
            if (percentage === 100) {
                message = "¡PERFECCIÓN ABSOLUTA! ¡Eres un maestro del clima! Tu conocimiento es asombroso.";
            } else if (percentage >= 90) {
                message = "¡EXCEPCIONAL! Tu dominio del tema es impresionante. ¡Casi perfecto!";
            } else if (percentage >= 75) {
                message = "¡MUY BIEN! Tienes un conocimiento sólido y detallado sobre el clima.";
            } else if (percentage >= 60) {
                message = "¡BUEN TRABAJO! Has comprendido muchos conceptos importantes. Sigue así.";
            } else if (percentage >= 40) {
                message = "¡Ánimo! Hay varios temas que puedes repasar para fortalecer tu entendimiento. ¡Cada intento es aprendizaje!";
            } else {
                message = "Es un buen momento para revisar el material a fondo. ¡No te desanimes, el conocimiento del clima es fascinante y con práctica lo dominarás!";
            }
            finalMessageElement.textContent = message;
        }
    </script>
</body>
</html>